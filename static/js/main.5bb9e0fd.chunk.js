(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(71)},36:function(e,t,a){},37:function(e,t,a){},38:function(e){e.exports={}},71:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(12),s=a.n(l),r=(a(36),a(7)),c=a(8),o=a(10),u=a(9),m=a(11),h=a(2),p=a(74),b=a(73),d=(a(37),a(38),a(72)),v=a(28),g=a.n(v),y=a(13),f=a.n(y),O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={overlayActive:!1,overlaySpinnerActive:!1,overlayText:"Waiting for model on remote server to answer...",getApiUrl:e.getApiUrl||"https://dsm.just-minimalism.com/classify-url",classifyImg:e.classifyImg,enableClassify:!0},a.handleClick=a.handleClick.bind(Object(h.a)(Object(h.a)(a))),a.handleClassify=a.handleClassify.bind(Object(h.a)(Object(h.a)(a))),a.toggleOverlay=a.toggleOverlay.bind(Object(h.a)(Object(h.a)(a))),a.doPostCallback=a.doPostCallback.bind(Object(h.a)(Object(h.a)(a))),a.doGetCallback=a.doGetCallback.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"exampleMapping",value:function(e){return{animal:"This is an animal mouse!",computer:"This is a computer mouse!",mickey:"This is mickey mouse"}[e.predictions[0][0]]}},{key:"handleClick",value:function(){this.toggleOverlay()}},{key:"toggleOverlay",value:function(){var e=this;this.setState(function(t){return{overlayActive:!e.state.overlayActive}})}},{key:"toggleSpinner",value:function(){var e=this;this.setState(function(t){return{overlaySpinnerActive:!e.state.overlaySpinnerActive}})}},{key:"handleClassify",value:function(){this.toggleOverlay(),this.toggleSpinner(),this.setState({overlayText:"Classifying image"}),this.props.uploaded?this.doPostCallback():this.doGetCallback()}},{key:"doPostCallback",value:function(){var e=this;fetch(this.props.baseUrl+"/classify-url",{method:"POST",body:this.props.imgBlob}).then(function(t){return t.json().then(function(t){e.setState({overlayText:e.exampleMapping(t),enableClassify:!1,overlayActive:!0}),e.toggleSpinner()})}).catch(function(t){e.setState({overlayText:t.message,enableClassify:!0}),e.toggleSpinner()})}},{key:"doGetCallback",value:function(){var e=this,t="?url="+encodeURIComponent(this.state.classifyImg);g.a.get("https://dsm.just-minimalism.com/classify-url"+t).then(function(t){e.setState({overlayText:e.exampleMapping(t.data),enableClassify:!1}),e.toggleSpinner()})}},{key:"render",value:function(){return i.a.createElement(f.a,{active:this.state.overlayActive,spinner:this.state.overlaySpinnerActive,text:this.state.overlayText,onClick:this.handleClick},i.a.createElement("div",{className:"App-header"},i.a.createElement("div",{className:"App-page"},i.a.createElement("div",{className:"App-panel"},i.a.createElement("img",{src:this.props.classifyImg,className:"App-preview-img",alt:""}),i.a.createElement(d.a,{className:"App-link-button",to:"/classify",onClick:this.handleClassify},"Classify")))),i.a.createElement(d.a,{to:"/",className:"App-back-link"},"Back"))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={overlayActive:!1,overlaySpinnerActive:!1,overlayText:""},a.imgId="ah3bd9-inputfile",a.onChange=a.onChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(){this.setState({overlayActive:!0,overlaySpinnerActive:!0,overlayText:"Accessing Image..."});var e=document.getElementById(this.imgId).files[0],t=new FileReader,a=this;t.onloadend=function(){a.props.bubble("verifyImg",t.result),a.props.bubble("uploaded",!0),a.props.bubble("imgBlob",e),a.props.history.push("/classify"),a.setState({overlayActive:!1})},e&&(t.readAsDataURL(e),this.setState({overlayActive:!0,overlaySpinnerActive:!0,overlayText:"Accessing Image..."}))}},{key:"render",value:function(){var e=this;return i.a.createElement(f.a,{active:this.state.overlayActive,spinner:this.state.overlaySpinnerActive,text:this.state.overlayText,onClick:this.handleClick},i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("div",{className:"App-panel"},i.a.createElement(d.a,{className:"App-link",to:"/verify-url"},"Enter Url")),i.a.createElement("p",null,"Or"),i.a.createElement("div",{className:"App-panel"},i.a.createElement("div",{id:"input-hider"},i.a.createElement("input",{type:"file",onChange:this.onChange,id:this.imgId,accept:"image/*"})),i.a.createElement("div",{className:"App-link",onClick:function(){return document.getElementById(e.imgId).click()}},"Upload file / Take photo ",this.state.overlayText)))))}}]),t}(n.Component),C=function(){return i.a.createElement("div",{id:"app-info"},i.a.createElement("p",null,"f6435832ef758807e339455db3998334dacddbd3"),i.a.createElement("p",null,"    add base chooser"))},k=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={baseUrl:""},a.handleChange=a.handleChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value;this.props.bubble("baseUrl",t)}},{key:"render",value:function(){return i.a.createElement("div",{id:"app-info"},i.a.createElement("select",{id:"App-backends-select",onChange:this.handleChange,value:this.props.baseUrl},i.a.createElement("option",{value:"https://dsm.just-minimalism.com"},"https://dsm.just-minimalism.com/"),i.a.createElement("option",{value:"http://138.197.227.42"},"http://138.197.227.42/")))}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={imgSrc:"",displayImg:!1,enableNext:!1},a.handlePaste=a.handlePaste.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handlePaste",value:function(e,t){var a=e.clipboardData.getData("Text");this.props.bubble("verifyImg",a),this.props.history.push("/classify")}},{key:"render",value:function(){return i.a.createElement("div",{className:"App-header"},i.a.createElement("div",{className:"App-page"},i.a.createElement("input",{type:"text",value:this.props.imgSrcRaw,className:"App-text-input",onChange:this.props.handleChange,placeholder:"Paste a URL",onPaste:this.handlePaste})))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={classifyImg:"",verifyImgUrl:null,validImg:!1,uploaded:!1,imgBlob:null,baseUrl:"https://dsm.just-minimalism.com"},a.handleChange=a.handleChange.bind(Object(h.a)(Object(h.a)(a))),a.handleError=a.handleError.bind(Object(h.a)(Object(h.a)(a))),a.bubble=a.bubble.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"bubble",value:function(e,t){this.setState(function(a){return a[e]=t})}},{key:"handleError",value:function(e){this.setState(function(e){return{}})}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState(function(e){return{verifyImgUrl:t,verifyImg:t}})}},{key:"render",value:function(e){var t=this;return i.a.createElement(p.a,{basename:"/fastai-vision-model-inference--react-gh-pages"},i.a.createElement("div",{className:"app-container"},i.a.createElement(b.a,{path:"/",exact:!0,render:function(e){return i.a.createElement(j,Object.assign({},e,{bubble:t.bubble}))}}),i.a.createElement(b.a,{path:"/verify-url",exact:!0,render:function(e){return i.a.createElement(E,Object.assign({},e,{classifyImg:t.state.classifyImg,handleChange:t.handleChange,handleError:t.handleError,imgSrcRaw:t.state.verifyImgUrl,imgSrcClean:t.state.verifyImg,bubble:t.bubble}))}}),i.a.createElement(b.a,{path:"/classify",exact:!0,render:function(e){return i.a.createElement(O,Object.assign({},e,{classifyImg:t.state.verifyImg,handleSubmit:t.handleSubmit,uploaded:t.state.uploaded,imgBlob:t.state.imgBlob,baseUrl:t.state.baseUrl}))}}),i.a.createElement(C,null),i.a.createElement(k,{bubble:this.bubble,baseUrl:this.state.baseUrl}),"/>"))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.5bb9e0fd.chunk.js.map